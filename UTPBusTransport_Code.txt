/*DROP TABLE MAINTENANCE;
DROP TABLE SCHEDULE;
DROP TABLE TICKET;
DROP TABLE CUSTOMER;
DROP TABLE ROUTE_BUS;
DROP TABLE STOP_BUS;
DROP TABLE BUS;
DROP TABLE ADMIN;
DROP TABLE SERVICEWORKER;
DROP TABLE ROUTE;
DROP TABLE APP;
DROP TABLE COMPANY;
DROP TABLE SERVICESHOP;
DROP TABLE CONDUCTOR;
DROP TABLE BUSSTOP;
DROP TABLE DRIVER; */

CREATE TABLE DRIVER (                      
    DriverID number(3) primary key,
    Name varchar2(20),
    Gender char(1),
    PhoneNum number(10),
    CONSTRAINT check_GenderD CHECK (Gender IN ('M', 'F'))
    );

CREATE TABLE BUSSTOP (                   
    CheckpointID number(3) primary key,
    Address varchar2(30)
    );

CREATE TABLE CONDUCTOR (                    
    ConductorID number(6) primary key,
    Name varchar2(30),
    Gender char(1),
    CONSTRAINT check_GenderCO CHECK (Gender IN ('M', 'F'))
    );
    
CREATE TABLE SERVICESHOP (               
    ShopID number(4) primary key,
    Address varchar2(30),
    PhoneNum number(9)
    );

CREATE TABLE COMPANY (                 
    CompanyID number(5) primary key,
    PhoneNum number(9),
    Email varchar2(30),
    Name varchar2(30),
    Address varchar2(30)
    );
    

CREATE TABLE APP (                             
    AppID char(4) primary key,
    AppName varchar2(20),
    AppVersion number(4,2)
    );

CREATE TABLE ROUTE (                     
    RouteCode number(4) primary key,
    RouteName varchar2(20)
    );
    
CREATE TABLE SERVICEWORKER (
    WorkerID char(4) primary key,
    ShopID number(4) NOT NULL,
    Name varchar2(30),
    Gender char(1),
    foreign key (ShopID) references SERVICESHOP (ShopID),
    CONSTRAINT check_GenderSW CHECK (Gender IN ('M', 'F'))
    );

CREATE TABLE ADMIN (
    AdminID number(3) primary key,
    AppID char(4) NOT NULL, 
    Name varchar2(30),
    PhoneNum number(9),
    foreign key (AppID) references APP (AppID) 
    );
    
CREATE TABLE BUS (                 
    BusID char(4) primary key,
    ModelType varchar2(20),
    Colour varchar2(20),
    DriverID number(3) NOT NULL,
    CompanyID number(5) NOT NULL,
    foreign key (DriverID) references DRIVER (DriverID),
    foreign key (CompanyID) references COMPANY (CompanyID)
    );

CREATE TABLE STOP_BUS (                         
    BusID char(4) NOT NULL,
    CheckpointID number(3) NOT NULL,
    foreign key (BusID) references BUS (BusID) ON DELETE CASCADE,
    foreign key (CheckpointID) references BUSSTOP (CheckpointID) ON DELETE CASCADE,
    CONSTRAINT Stop_Bus_PK primary key (BusID, CheckpointID)
    );
    
CREATE TABLE ROUTE_BUS (                        
    BusID char(4) NOT NULL,
    RouteCode number(4) NOT NULL,
    foreign key (BusID) references BUS (BusID) ON DELETE CASCADE,
    foreign key (RouteCode) references ROUTE (RouteCode) ON DELETE CASCADE,
    CONSTRAINT Route_Bus_PK primary key (RouteCode, BusID)
    );

CREATE TABLE CUSTOMER (                         
    MatrixID number(8) primary key,
    Email varchar2(30),
    Name varchar2(30),
    Gender char(1),
    PhoneNum number(10),
    AppID char(4) NOT NULL,
    foreign key (AppID) references APP (AppID),
    CONSTRAINT check_GenderC CHECK (Gender IN ('M', 'F'))
    );

CREATE TABLE TICKET (                           
    TicketID char(5) primary key,   
    MatrixID number(8) NOT NULL,
    BusID char(4) NOT NULL,
    ConductorID number(6) NOT NULL,
    DT_Tick timestamp(2),
    CheckpointID number(3) NOT NULL,
    foreign key (MatrixID) references CUSTOMER (MatrixID),
    foreign key (BusID) references BUS (BusID),
    foreign key (ConductorID) references CONDUCTOR (ConductorID),
     foreign key (CheckpointID) references BUSSTOP (CheckpointID)
    );
    
CREATE TABLE SCHEDULE (
    BusID char(4) NOT NULL,
    MatrixID number(8) NOT NULL,
    DT_Sched timestamp(2),
    foreign key (BusID) references BUS (BusID) ON DELETE CASCADE,
    foreign key (MatrixID) references CUSTOMER (MatrixID) ON DELETE CASCADE,
    CONSTRAINT Sched_PK primary key (BusID, MatrixID)
    );
    
CREATE TABLE MAINTENANCE (                      
    BusID char(4) NOT NULL,
    ShopID number(4) NOT NULL,
    DT timestamp(2),
    Type varchar2(30),
    foreign key (BusID) references BUS (BusID) ON DELETE CASCADE,
    foreign key (ShopID) references SERVICESHOP (ShopID) ON DELETE CASCADE,
    CONSTRAINT Bus_Shop_PK PRIMARY KEY  (BusID, ShopID)
    );

INSERT INTO DRIVER VALUES (111,'Datu', 'F', 6012345678);
INSERT INTO DRIVER VALUES (222,'Farouq', 'M', 6012345678);
INSERT INTO DRIVER VALUES (333,'Akil', 'M', 6012345679);
INSERT INTO DRIVER VALUES (444,'Shahym', 'F', 6012345689);
INSERT INTO DRIVER VALUES (555,'Shahmi', 'M', 6012345789);

INSERT INTO BUSSTOP VALUES (110, 'Village 1');
INSERT INTO BUSSTOP VALUES (220, 'Village 2');
INSERT INTO BUSSTOP VALUES (330, 'Village 3');
INSERT INTO BUSSTOP VALUES (440, 'Village 4');
INSERT INTO BUSSTOP VALUES (550, 'Village 5');
INSERT INTO BUSSTOP VALUES (660, 'Village 6');

INSERT INTO CONDUCTOR VALUES (101010, 'Fahmi', 'M');
INSERT INTO CONDUCTOR VALUES (202020, 'Mahmud', 'M');
INSERT INTO CONDUCTOR VALUES (303030, 'Mei-Mei', 'F');
INSERT INTO CONDUCTOR VALUES (404040, 'Nazim', 'F');
INSERT INTO CONDUCTOR VALUES (505050, 'Jeisha', 'F');
INSERT INTO CONDUCTOR VALUES (606060, 'Fawwaz', 'M');

INSERT INTO SERVICESHOP VALUES (1910, 'Bota Kiri', 130088255);
INSERT INTO SERVICESHOP VALUES (1912, 'Bota Kanan', 130088256);
INSERT INTO SERVICESHOP VALUES (1913, 'Bandar Universiti', 130088257);
INSERT INTO SERVICESHOP VALUES (1914, 'UTP', 130088258);
INSERT INTO SERVICESHOP VALUES (1915, 'Batu Gajah', 130088259);

INSERT INTO COMPANY VALUES (13579, 018765432, 'Company1@gmail.com', 'Company1', 'Bota Kiri');
INSERT INTO COMPANY VALUES (91357, 029876543, 'Company2@gmail.com', 'Company2', 'Bota Kanan');
INSERT INTO COMPANY VALUES (71359, 039876542, 'Company3@gmail.com', 'Company3', 'Bandar Universiti');
INSERT INTO COMPANY VALUES (51379, 049876532, 'Company4@gmail.com', 'Company4', 'UTP');
INSERT INTO COMPANY VALUES (31579, 059876432, 'Company5@gmail.com', 'Company5', 'Batu Gajah');

INSERT INTO APP VALUES ('UB02', 'BusEventBook', 1.0 );
INSERT INTO APP VALUES ('UB03', 'BusSchedule', 1.3 );
INSERT INTO APP VALUES ('UB04', 'BusStopChecker', 1.4 );
INSERT INTO APP VALUES ('UB05', 'BusTransHelp', 2.0 );
INSERT INTO APP VALUES ('UB06', 'BusOnlineTicket', 1.20 );

INSERT INTO ROUTE VALUES (1, 'Jalan 1');
INSERT INTO ROUTE VALUES (2, 'Jalan 2');
INSERT INTO ROUTE VALUES (3, 'Jalan 3');
INSERT INTO ROUTE VALUES (4, 'Jalan 4');
INSERT INTO ROUTE VALUES (5, 'Jalan 5');

INSERT INTO SERVICEWORKER VALUES ('SW01', 1910, 'Danish Luther', 'M');
INSERT INTO SERVICEWORKER VALUES ('SW02', 1912, 'Cory Barry', 'M');
INSERT INTO SERVICEWORKER VALUES ('SW03', 1913, 'Anne Juliett', 'F');
INSERT INTO SERVICEWORKER VALUES ('SW04', 1914, 'Travis James', 'M');
INSERT INTO SERVICEWORKER VALUES ('SW05', 1915, 'Cardi Borris', 'F');

INSERT INTO ADMIN VALUES (570, 'UB02', 'Karamsingwalia', 102345678);
INSERT INTO ADMIN VALUES (571, 'UB03', 'Jackie Chong', 112345678);
INSERT INTO ADMIN VALUES (572, 'UB04', 'Bill Fence', 122345678);
INSERT INTO ADMIN VALUES (573, 'UB05', 'Jack Mei', 132345678);
INSERT INTO ADMIN VALUES (574, 'UB06', 'Triz Paiz', 142345678);

INSERT INTO BUS VALUES ('BP20','UTPBUS1','BLUE', 111, 13579);
INSERT INTO BUS VALUES ('BP30','UTPBUS2','RED',  111, 13579);
INSERT INTO BUS VALUES ('BP40','UTPBUS3','BLUE', 222, 91357);
INSERT INTO BUS VALUES ('BP50','UTPBUS3','RED',  333, 51379);
INSERT INTO BUS VALUES ('BP60','UTPBUS4','BLUE', 444, 31579);
INSERT INTO BUS VALUES ('BP70','UTPBUS5','RED',  555, 71359);

INSERT INTO STOP_BUS VALUES ('BP20', 110);
INSERT INTO STOP_BUS VALUES ('BP20', 220);
INSERT INTO STOP_BUS VALUES ('BP30', 220);
INSERT INTO STOP_BUS VALUES ('BP30', 330);
INSERT INTO STOP_BUS VALUES ('BP30', 440);
INSERT INTO STOP_BUS VALUES ('BP40', 110);
INSERT INTO STOP_BUS VALUES ('BP40', 220);
INSERT INTO STOP_BUS VALUES ('BP40', 330);
INSERT INTO STOP_BUS VALUES ('BP50', 110);
INSERT INTO STOP_BUS VALUES ('BP50', 330);
INSERT INTO STOP_BUS VALUES ('BP50', 440);
INSERT INTO STOP_BUS VALUES ('BP60', 110);
INSERT INTO STOP_BUS VALUES ('BP60', 330);
INSERT INTO STOP_BUS VALUES ('BP60', 550);
INSERT INTO STOP_BUS VALUES ('BP70', 220);
INSERT INTO STOP_BUS VALUES ('BP70', 440);


INSERT INTO ROUTE_BUS VALUES ('BP20',1);
INSERT INTO ROUTE_BUS VALUES ('BP20',2);
INSERT INTO ROUTE_BUS VALUES ('BP30',2);
INSERT INTO ROUTE_BUS VALUES ('BP30',3);
INSERT INTO ROUTE_BUS VALUES ('BP30',4);
INSERT INTO ROUTE_BUS VALUES ('BP40',1);
INSERT INTO ROUTE_BUS VALUES ('BP40',2);
INSERT INTO ROUTE_BUS VALUES ('BP40',3);
INSERT INTO ROUTE_BUS VALUES ('BP50',3);
INSERT INTO ROUTE_BUS VALUES ('BP50',4);
INSERT INTO ROUTE_BUS VALUES ('BP60',1);
INSERT INTO ROUTE_BUS VALUES ('BP60',3);
INSERT INTO ROUTE_BUS VALUES ('BP60',5);
INSERT INTO ROUTE_BUS VALUES ('BP70',2);
INSERT INTO ROUTE_BUS VALUES ('BP70',4);

INSERT INTO CUSTOMER VALUES (18000877, 'TheImported@gmail.com','Ali', 	'M', 0137712454,'UB02');
INSERT INTO CUSTOMER VALUES (18000800, 'CreepyMan@gmail.com',  'Abu', 	'M', 0198187710,'UB03');
INSERT INTO CUSTOMER VALUES (18000878, 'BrownBear@gmail.coM',  'Mei Ling','F', 0134547712,'UB03');
INSERT INTO CUSTOMER VALUES (18000811, 'TheFour@gmail.com',	'Yaya',	'F', 0197710818,'UB04');
INSERT INTO CUSTOMER VALUES (18000777, 'Uttermost@gmail.com',  'Jhonas',  'M', 0137174583,'UB05');

INSERT INTO TICKET VALUES ('T0001', 18000877, 'BP20', 101010, TO_TIMESTAMP('10-JAN-19 10:00:00.00 AM'), 110);
INSERT INTO TICKET VALUES ('T0002', 18000800, 'BP30', 202020, TO_TIMESTAMP('20-JAN-19 11:00:00.00 AM'), 220);
INSERT INTO TICKET VALUES ('T0003', 18000878, 'BP40', 303030, TO_TIMESTAMP('30-JAN-19 1:00:00.00 PM'), 330);
INSERT INTO TICKET VALUES ('T0004', 18000811, 'BP50', 404040, TO_TIMESTAMP('10-FEB-19 6:30:00.00 PM'), 330);
INSERT INTO TICKET VALUES ('T0005', 18000777, 'BP60', 505050, TO_TIMESTAMP('20-FEB-19 10:00:00.00 PM'), 440);
INSERT INTO TICKET VALUES ('T0006', 18000777, 'BP70', 606060, TO_TIMESTAMP('20-FEB-19 10:00:00.00 PM'), 550);

INSERT INTO SCHEDULE VALUES ('BP20', 18000877, TO_TIMESTAMP('10-JAN-19 10:00:00.00 AM'));
INSERT INTO SCHEDULE VALUES ('BP30', 18000800, TO_TIMESTAMP('11-JAN-19 08:30:00.00 AM'));
INSERT INTO SCHEDULE VALUES ('BP40', 18000878, TO_TIMESTAMP('12-JAN-19 07:00:00.00 AM'));
INSERT INTO SCHEDULE VALUES ('BP50', 18000811, TO_TIMESTAMP('13-JAN-19 06:30:00.00 AM'));
INSERT INTO SCHEDULE VALUES ('BP60', 18000777, TO_TIMESTAMP('11-JAN-19 10:00:00.00 AM'));
INSERT INTO SCHEDULE VALUES ('BP40', 18000877, TO_TIMESTAMP('13-JAN-19 10:00:00.00 AM'));
INSERT INTO SCHEDULE VALUES ('BP70', 18000800, TO_TIMESTAMP('12-JAN-19 03:00:00.00 PM'));
INSERT INTO SCHEDULE VALUES ('BP30', 18000811, TO_TIMESTAMP('13-JAN-19 04:00:00.00 PM'));
INSERT INTO SCHEDULE VALUES ('BP20', 18000777, TO_TIMESTAMP('12-JAN-19 10:00:00.00 AM'));
INSERT INTO SCHEDULE VALUES ('BP70', 18000878, TO_TIMESTAMP('13-JAN-19 03:00:00.00 PM'));

INSERT INTO MAINTENANCE VALUES ('BP20',1910, TO_TIMESTAMP('02-JAN-19 9:30:30.30 PM'), 'Tyre');
INSERT INTO MAINTENANCE VALUES ('BP20',1912, TO_TIMESTAMP('03-JAN-19 9:30:30.30 PM'), 'Engine');
INSERT INTO MAINTENANCE VALUES ('BP30',1913, TO_TIMESTAMP('3-OCT-19 2:24:12.30 PM'), 'Brake system');
INSERT INTO MAINTENANCE VALUES ('BP30',1914, TO_TIMESTAMP('4-OCT-19 2:24:12.30 PM'), 'Wiper');
INSERT INTO MAINTENANCE VALUES ('BP40',1914, TO_TIMESTAMP('13-NOV-19 3:00:10.30 AM'), 'Wiper');
INSERT INTO MAINTENANCE VALUES ('BP40',1915, TO_TIMESTAMP('14-NOV-19 3:00:10.30 AM'), 'Black oil');
INSERT INTO MAINTENANCE VALUES ('BP50',1913, TO_TIMESTAMP('22-NOV-19 5:40:30.25 PM'), 'Brake system');
INSERT INTO MAINTENANCE VALUES ('BP60',1910, TO_TIMESTAMP('16-DEC-19 5:40:30.25 PM'), 'Tyre');
INSERT INTO MAINTENANCE VALUES ('BP60',1913, TO_TIMESTAMP('18-DEC-19 5:40:30.25 PM'), 'Brake system');
INSERT INTO MAINTENANCE VALUES ('BP60',1915, TO_TIMESTAMP('20-DEC-19 10:30:14.30 AM'), 'Black oil');

SELECT * FROM DRIVER;
SELECT * FROM BUSSTOP;
SELECT * FROM CONDUCTOR;
SELECT * FROM SERVICESHOP;
SELECT * FROM COMPANY;
SELECT * FROM APP;
SELECT * FROM ROUTE;
SELECT * FROM SERVICEWORKER;
SELECT * FROM ADMIN;
SELECT * FROM BUS;
SELECT * FROM STOP_BUS;
SELECT * FROM ROUTE_BUS;
SELECT * FROM CUSTOMER;
SELECT TicketID, MatrixID, BusID, ConductorID, TO_CHAR(DT_Tick, 'MONTH DD, YYYY "at" HH24:MI') as DATETIME, CheckpointID FROM TICKET;
SELECT BusID, MatrixID, TO_CHAR(DT_Sched, 'MONTH DD, YYYY "at" HH24:MI') as DATETIME FROM SCHEDULE;
SELECT BusID, ShopID, TO_CHAR(DT, 'MONTH DD, YYYY "at" HH24:MI') as DATETIME, Type FROM MAINTENANCE;